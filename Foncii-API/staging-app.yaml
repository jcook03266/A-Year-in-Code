service: staging-foncii-api
runtime: nodejs18
env: standard
instance_class: B1

basic_scaling:
  max_instances: 1
  idle_timeout: 10m

handlers:
  - url: /.*
    secure: optional
    redirect_http_response_code: 301
    script: auto

# Set environment to staging when deploying
env_variables:
  NODE_ENV: "staging"
  PROJECT_ID: "594762600292"
  # Data Aggregation API Keys
  YELP_FUSION_API_SECRET: "secret__staging-yelp-fusion-api"
  GOOGLE_MAPS_API_SECRET: "secret__staging-google-maps-api"
  # Firebase / Google Service Keys
  FONCII_APP_ADMIN_SDK_CERT_SECRET: "secret__staging-foncii-app-admin-sdk-cert"
  FONCII_MAPS_ADMIN_SDK_CERT_SECRET: "secret__staging-foncii-maps-admin-sdk-cert"
  # Database google secret
  MONGODB_CONNECTION_SECRET: "secret__staging-mongodb-connection"
  # Resy User API Credentials
  RESY_API_SECRET: "secret__staging-resy-api"
  # Apollo Studio Credentials
  # SECRET - APOLLO REQUIRES THIS NAME
  APOLLO_KEY: "secret__staging-apollo"
  APOLLO_GRAPH_REF: "foodie-supergraph@main"
  APOLLO_SCHEMA_REPORTING: "true"
  # API Authorization Secrets
  # Used for communicating between microservices
  FONCII_SERVER_API_SECRET: "secret__staging-foncii-server-api"
  API_KEY_SALT_SECRET: "secret__staging-api-key-salt"
  # Local Environment Only, Not exposed anywhere else! | Used for external communications where the true API key can't be exposed
  ENCIPHERED_SERVER_API_SECRET: "secret__staging-enciphered-server-api"
  # Foncii Maps Env Variables
  # Instagram API
  INSTAGRAM_CLIENT_ID: "441821997622037"
  INSTAGRAM_CLIENT_SECRET: "secret__staging-instagram-client"
  # OpenAI API
  OPEN_AI_SECRET: "secret__staging-openai-key"
